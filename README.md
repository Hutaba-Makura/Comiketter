# Comiketter

コミケ向けX（旧Twitter）専用Chrome拡張機能

## 🚀 機能

### ✅ 実装済み機能

- **タイムライン自動更新抑止**: 勝手にTLが更新される問題に対処
- **カスタムブックマーク（CB）管理**: 柔軟なブックマーク分類と管理
- **画像・動画の自動保存**: TwitterMediaHarvest準拠のメディアダウンロード
- **動画サムネイル除外機能**: 不要なサムネイル画像の除外
- **プロフィール画像・バナー画像除外機能**: メディアの自動除外設定
- **保存済みツイート一覧表示**: ダウンロード履歴の管理・参照
- **ファイル名・パス設定機能**: 13種類のパターントークン対応
- **API傍受機能**: X APIの自動傍受とキャッシュ
- **ダウンロード履歴管理**: IndexedDBベースの履歴管理

### 🔧 技術的特徴

- **Manifest v3対応**: 最新のChrome拡張機能仕様
- **TypeScript**: 型安全性の確保
- **React + Mantine**: モダンなUI/UX
- **IndexedDB**: 高性能なローカルデータベース
- **Jest**: 包括的なテスト環境

## 🛠️ 開発環境

### 必要条件

- Node.js 18.0.0以上
- Yarn 1.22.0以上

### セットアップ

```bash
# 依存関係のインストール
yarn install

# 開発ビルド
yarn build:dev

# 本番ビルド
yarn build:prod

# ウォッチモード（開発中）
yarn watch

# テスト実行
yarn test

# リント実行
yarn lint

# コードフォーマット
yarn format

# 型チェック
yarn type-check
```

### 技術スタック

| 分類 | 技術 | バージョン | 用途 |
|------|------|-----------|------|
| **プラットフォーム** | Chrome Extension | Manifest v3 | 拡張機能基盤 |
| **言語** | TypeScript | 5.2+ | メイン開発言語 |
| **フレームワーク** | React | 18.2+ | UI構築 |
| **ビルドツール** | Webpack | 5.89+ | バンドル・ビルド |
| **UIライブラリ** | Mantine | 7.2+ | コンポーネントライブラリ |
| **データベース** | IndexedDB | - | ローカルデータ保存 |
| **テスト** | Jest | 29.7+ | ユニットテスト |
| **Lint/Format** | ESLint + Prettier | 8.53+ | コード品質管理 |
| **Gitフック** | Husky | 8.0+ | コミット前チェック |

## 📁 プロジェクト構造

```
src/
├── api-processor/     # API処理・メディア抽出
├── background/        # バックグラウンドスクリプト
├── bookmarks/         # ブックマークページ
├── components/        # 再利用可能なUIコンポーネント
├── contentScript/     # コンテンツスクリプト
├── downloaders/       # ダウンロード処理
├── hooks/            # カスタムReactフック
├── options/          # オプションページ
├── popup/            # ポップアップページ
├── stores/           # 状態管理
├── test/             # テストファイル
├── types/            # 型定義
└── utils/            # ユーティリティ関数
```

## 📊 開発進捗

### ✅ 完了済み（87%）

- **基盤機能**: 100% 完了
- **UI/UX**: 85% 完了
- **ダウンロード履歴機能**: 95% 完了
- **カスタムブックマーク**: 90% 完了
- **API傍受**: 80% 完了
- **テスト**: 60% 完了
- **ドキュメント**: 100% 完了

### 🚧 進行中

- データ移行・統合機能
- UI/UX改善

### 📋 今後の予定

- ダウンロード履歴のエクスポート機能
- バッチダウンロード機能
- 高度な検索機能
- ダークテーマ対応

## 📚 ドキュメント

詳細なドキュメントは `docs/` ディレクトリを参照してください：

- [実装環境・技術仕様](docs/implementation-environments.md)
- [データフロー図](docs/data-flow-diagram.md)
- [ER図](docs/er-diagram.md)
- [API傍受実装](docs/api-cache-implementation.md)
- [ダウンロード実装](docs/download-implementation.md)
- [開発タスク一覧](docs/tasks.md)

## 🎯 開発順序

1. ✅ 環境構築
2. ✅ API傍受機能の実装
3. ✅ ダウンロード処理の実装
4. ✅ 動画ダウンロード機能の実装
5. ✅ メディア除外機能の実装
6. ✅ DB構築
7. ✅ ブックマーク処理
8. ✅ ブックマークしたツイートの表示
9. 🔄 データ移行・統合
10. 📋 UI/UX改善

## 📄 ライセンス

MIT License

## ⚠️ 注意事項

- TwitterMediaHarvestから流用する際は、該当ソースの先頭や修正箇所にライセンス表記を必ず記載すること
- 保存方式はchrome.downloads API（デフォルト）とNativeMessaging+curl（オプション）両対応
- CBデータ構造は保存形式や参照方式に応じて柔軟に設計
- 型安全性を最優先に考えた実装
- テストは必ず作成する
- パフォーマンスを意識した実装を行う 