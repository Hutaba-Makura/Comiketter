# 📘 Comiketter 要件定義書

## 📝 概要
**Comiketter** は、コミックマーケット（コミケ）参加者向けに設計された X（旧Twitter）専用の Chrome 拡張機能です。タイムラインの自動更新の抑止、ツイートのカスタムブックマーク（CB）管理、画像・動画の自動保存、保存済みツイート一覧の表示などを行い、ユーザーの収集・整理・参照体験を向上させます。

---

## 🧩 機能要件

### ✅ 基本機能一覧

| 機能カテゴリ | 内容 |
|-------------|------|
| TL自動更新抑止 | おすすめ欄や通常TLが勝手に更新される挙動を停止 |
| カスタムブックマーク（CB） | ツイートに独自のCBボタンを追加。CBは複数作成可能で名前も自由に設定できる（例:「1日目」「絶対行きたい」など） |
| CB選択UI | CBボタン押下でチェックリスト形式のCB一覧が表示され、選択したCBにツイートを追加できる（YouTubeのプレイリスト追加UI風） |
| CB保存ページ | 拡張機能アイコンやX画面のサイドバーから、保存したCBツイートをTL風デザインで閲覧可能 |
| 保存データ形式 | `(画像URL + テキスト)` または `(画像本体 + テキスト)` を設定で選択可能。混合データも表示対応 |
| 自動保存機能 | 「RT」「いいね」「RT + いいね」などのアクションをトリガーとして、自動的に画像・動画保存を実行（条件はユーザー設定） |
| 保存方法選択 | 通常の `chrome.downloads` API または `NativeMessaging` 経由の curl 実行による保存方式を選択可能 |
| 保存ディレクトリ構成 | アカウント別・日付別（`YYYY-MM-DD`）で整理されたファイル保存をサポート |
| ダウンロード履歴DB | ダウンロードの記録を CB とは別DBに保存し、ファイル名・保存時刻・URL などを後から参照可能 |
| コミケAPI連携（予定） | 将来的にコミケ公式APIを用いた出展者情報取得・CB自動分類等の機能追加を検討中 |

---

## 🏗 技術スタック

| 分類 | 内容 |
|------|------|
| プラットフォーム | Chrome 拡張（Manifest v3） |
| 言語 | TypeScript |
| フレームワーク | React |
| ビルド | Webpack |
| UIライブラリ | Mantine |
| データベース | IndexedDB（NoSQL） |
| 状態管理 | `useState`（将来的に Zustand 等導入検討） |
| 画像DL | `chrome.downloads` API / NativeMessaging（curl） |
| パッケージ管理 | Yarn |
| テスト | Jest |
| Lint / Format | ESLint + Prettier |
| Gitフック | Husky |

---

## 📌 補足事項

- NativeMessaging による curl 実行にはネイティブアプリの同梱・配布が必要。
- UIはできる限りX公式に近い見た目を維持し、違和感なく機能を拡張する方針。
- 今後、状態遷移図・操作フロー図は Mermaid や Figma を用いて整理予定。

---

## 📅 今後の展望（ToDo）

- [ ] CB追加～保存UIの状態遷移図作成
- [ ] DL履歴構造のDB設計
- [ ] コミケAPI連携の仕様リサーチ
