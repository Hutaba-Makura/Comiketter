# ✅ Comiketter 開発タスクリスト（詳細版）

## 🔷 1. 開発環境の構築
- [ ] TypeScript + React + Webpack + Mantine の初期構成
- [ ] ESLint + Prettier の導入と整備
- [ ] Jest テストのセットアップ
- [ ] Husky による Git hook（commit 時 lint/format 実行）
- [ ] `setting.json` の読み書き処理と初期デフォルト管理

---

## 🔷 2. API傍受機能の実装
- [ ] `injectFetch.ts` などを流用し、X（Twitter）API（GraphQL）通信を傍受
  - [ ] XMLHttpRequest.prototype.open のProxy
  - [ ] fetchのラップでレスポンス監視
  - [ ] カスタムイベントまたはメッセージ発火
  - [ ] 流用元コードにはライセンス表記を必ず記載

---

## 🔷 3. ダウンロード処理の実装
- [ ] RT / いいねなどの動作を検知（APIレスポンスから抽出）
- [ ] 条件一致時にDL処理に遷移
- [ ] `chrome.downloads` API（デフォルト）または NativeMessaging + curl（オプション、.bat等で連携）
- [ ] 保存ディレクトリはツイート主Xアカウント別・日付別

---

## 🔷 4. DB構築
- [ ] IndexedDB設計と実装
  - [ ] CB保存用DB（データ構造は柔軟に設計。ツイートリンクのみ/全情報保存など選択可）
  - [ ] DL履歴DB（ファイル名、ツイートID、保存日、パス、保存方法 など）

---

## 🔷 5. ブックマーク処理
- [ ] TL上の各ツイートにCB（カスタムブックマーク）ボタン設置
- [ ] クリック時にチェックリスト形式のCB選択UI表示（通常ブックマークの下）
- [ ] 選択されたCBにツイートを保存
- [ ] CB管理（作成・編集・削除）はCBツイート一覧から操作

---

## 🔷 6. ブックマークしたツイートの表示
- [ ] サイドバーにCustomBookmarksボタン追加
- [ ] 保存済みCBツイートをTL風ページで表示
- [ ] 画像URL/画像本体混在データも表示対応

---

## 🔷 7. 今後検討
- [ ] コミケ公式APIとの連携仕様調査
- [ ] サークル名→ツイート検索自動連携 など

