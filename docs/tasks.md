# ✅ Comiketter 開発タスクリスト（詳細版）

## 🔷 1. 開発環境の構築
- [x] TypeScript + React + Webpack + Mantine の初期構成
- [x] ESLint + Prettier の導入と整備
- [x] Jest テストのセットアップ
- [x] Husky による Git hook（commit 時 lint/format 実行）
- [x] `setting.json` の読み書き処理と初期デフォルト管理

---

## 🔷 2. API傍受機能の実装
- [x] `injectFetch.ts` などを流用し、X（Twitter）API（GraphQL）通信を傍受
  - [x] XMLHttpRequest.prototype.open のProxy
  - [x] fetchのラップでレスポンス監視
  - [x] カスタムイベントまたはメッセージ発火
  - [x] 流用元コードにはライセンス表記を必ず記載

---

## 🔷 3. ダウンロード処理の実装
- [x] RT / いいねなどの動作を検知（APIレスポンスから抽出）
- [x] 条件一致時にDL処理に遷移
- [x] `chrome.downloads` API（デフォルト）または NativeMessaging + curl（オプション、.bat等で連携）
- [x] 保存ディレクトリはツイート主Xアカウント別・日付別

---

## 🔷 4. DB構築
- [x] IndexedDB設計と実装
  - [x] CB保存用DB（データ構造は柔軟に設計。ツイートリンクのみ/全情報保存など選択可）
  - [x] DL履歴DB（ファイル名、ツイートID、保存日、パス、保存方法 など）

---

## 🔷 5. ブックマーク処理
- [x] TL上の各ツイートにCB（カスタムブックマーク）ボタン設置
- [x] クリック時にチェックリスト形式のCB選択UI表示（通常ブックマークの下）
- [x] 選択されたCBにツイートを保存
- [x] CB管理（作成・編集・削除）はCBツイート一覧から操作

---

## 🔷 6. ブックマークしたツイートの表示
- [x] サイドバーにCustomBookmarksボタン追加
- [x] 保存済みCBツイートをTL風ページで表示
- [x] CB管理UIの実装
- [x] テーマ検出機能の実装

---

## 🔷 7. ファイル名・パス設定機能
- [x] TwitterMediaHarvest準拠のパターントークン実装
- [x] ファイル名生成ロジックの実装
- [x] 設定UIの基本構造実装
- [ ] 設定ページの完全実装
- [ ] リアルタイムプレビュー機能

---

## 🔷 8. 自動保存機能
- [x] API傍受によるトリガー検知
- [x] ダウンロード処理の基本実装
- [ ] ユーザー設定による条件分岐
- [ ] 自動保存の有効/無効切り替え

---

## 🔷 9. UI/UX改善
- [x] X公式に近い見た目の実装
- [x] テーマ対応（ライト/ダーク/ブラック）
- [x] ボタン配置の最適化
- [ ] レスポンシブ対応
- [ ] アクセシビリティ対応

---

## 🔷 10. テスト・品質保証
- [x] 基本機能のテスト実装
- [x] エラーハンドリングの実装
- [ ] 統合テストの実装
- [ ] パフォーマンステスト
- [ ] セキュリティテスト

---

## 🔷 11. ドキュメント・保守
- [x] 基本ドキュメントの整備
- [x] コードコメントの追加
- [ ] API仕様書の作成
- [ ] ユーザーマニュアルの作成
- [ ] デプロイ手順書の作成

---

## 🔷 12. 将来機能（未実装）
- [ ] TL自動更新抑止機能
- [ ] NativeMessaging連携
- [ ] コミケAPI連携
- [ ] 高度な検索・フィルタ機能
- [ ] データエクスポート機能

